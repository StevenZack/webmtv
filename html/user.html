<!DOCTYPE html>
<html>
<head>
	<title>WebmTV</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>
	<script type="text/javascript">
		function LogOut(){
			setCookie("WEBMTV-SESSION-ID","",0)
			location.href="/"
		}
		function setCookie(cname,cvalue,exdays){
		  var d = new Date();
		  d.setTime(d.getTime()+(exdays*24*60*60*1000));
		  var expires = "expires="+d.toGMTString();
		  document.cookie = cname + "=" + cvalue + "; " + expires;
		}
		function prePageFunc(){
			var reqPage=(new Number(document.getElementsByName("curPage")[0].value)-1).toString()
			location.href="/u?id="+document.getElementsByName("id")[0].value+"&reqPage="+reqPage
		}
		function nextPageFunc(){
			var reqPage=(new Number(document.getElementsByName("curPage")[0].value)+1).toString()
			location.href="/u?id="+document.getElementsByName("id")[0].value+"&reqPage="+reqPage
		}
	</script>
</head>
<body><center>
<b onclick="window.history.back()" style="cursor: pointer;">Back</b>
<b onclick="location.href='/'" style="cursor: pointer;">WebmTV</b><br>
{{with .Me}}
	<h1><b>{{.ID}}</b></h1>
{{end}}
{{if .IsMyPage}}
<input type="button" value="log out" onclick="LogOut()">
{{end}}
<p>Uploads :</p>


<table border="0">
{{if .IsMyPage}}
	{{range .MyVideos}}
		<tr>
			<td><img src="{{.Cover}}" width="200" height="100"></td>
			<td><a href="/v?vid={{.Vid}}">{{.Title}}</a><br>
				<a href="/editvideo?vid={{.Vid}}">edit</a>
				<a href="/deletevideo?vid={{.Vid}}">delete</a>
			</td>
		</tr>
	{{end}}
{{else}}
	{{range .MyVideos}}
		<tr>
			<td><img src="{{.Cover}}" width="200" height="100"></td>
			<td><a href="/v?vid={{.Vid}}">{{.Title}}</a>
			</td>
		</tr>
	{{end}}
{{end}}
</table>
<input type="button" id="prePage" onclick="prePageFunc()" value="<-">
<form method="post" action="/u">
	{{with .Me}}
	<input type="hidden" name="id" value="{{.ID}}">
	{{end}}
	<input type="hidden" name="curPage" value="{{.CurrentPage}}">
	<input type="text" size="2" name="reqPage" value="{{.CurrentPage}}">
	/<span id="totalPage">{{.TotalPage}}</span>
	<input type="submit" name="submit" value="submit">
</form>
<input type="button" id="nextPage" onclick="nextPageFunc()" value="->">
</center>
<script type="text/javascript">
	if (document.getElementsByName("curPage")[0].value=="1") {
		document.getElementById("prePage").disabled="disabled"
	}
	if (document.getElementsByName("curPage")[0].value==document.getElementById("totalPage").innerHTML) {
		document.getElementById("nextPage").disabled="disabled"
	}
</script>
</body>
</html>